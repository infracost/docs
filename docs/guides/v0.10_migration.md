---
slug: v0.10_migration
title: v0.10 migration guide
---

import useBaseUrl from '@docusaurus/useBaseUrl';

Once you've [installed Infracost v0.10](/docs/#1-install-infracost), follow this page to migrate. If you encounter any issues while migrating, [please report them](https://github.com/infracost/infracost/issues/new) and we'll address them
as soon as possible.

## What's new?

With this release we're making parsing HCL the default for Infracost `breakdown` and `diff`, this means:

1. Cost estimates can be generated without generating a Terraform plan. This removes our dependency on the Terraform
   binary - the Infracost CLI is now lightning-fast ðŸš€
2. Since a Terraform plan is not needed, cloud credentials and Terraform secrets are also not required.
3. Different Infracost runs can now be compared using a new `--compare-to` flag.
4. We're changing how Infracost's internal project system works and providing a `--project-type` flag to enable users to override Infracost project auto-detection. Valid project types are now: 

| Project Type         | Infracost Name         | Description                                                                            |
|----------------------|------------------------|----------------------------------------------------------------------------------------|
| Terraform directory  | `terraform_dir`        | Parse a Terraform directory using HCL (default behavior).                              |
| Terragrunt directory | `terragrunt_dir`       | Parse a Terragrunt directory using HCL.                                                |
| Terraform plan JSON  | `terraform_plan_json`  | Parse a Terraform plan JSON.                                                           |
| Terraform state JSON | `terraform_state_json` | Parse a Terraform state file.                                                          | 
| Terraform plan file  | `terraform_plan`       | Parse a Terraform plan binary file.                                                    | 
| Terraform CLI        | `terraform_cli`        | Execute the Terraform binary to generate a plan JSON that Infracost can parse.         | 
| Terragrunt CLI       | `terragrunt_cli`       | Execute the Terragrunt binary to generate multiple plan JSON that Infracost can parse. | 

## Migration guide

### Parsing HCL

Parsing HCL has no concept of Terraform state. This makes it super-fast, but this means you'll need to compare Infracost runs to show cost differences. 

For example the following commands

```shell
cd path/to/code

# Checkout the feature branch for your infrastructure changes
git checkout mybranch

# Generate an Infracost JSON file that represents changes between local code changes and Terraform state. (e.g. to store in CI or pass to `infracost comment`)
infracost breakdown --path . \
   --format json \
   --out-file infracost-pull-request-123.json
```

Needs to be rewritten as such:

```shell
cd path/to/code

# Generate an Infracost JSON file for the run
git checkout main
infracost breakdown --path . --format json --out-file infracost-main.json

# Checkout the feature branch for your infrastructure changes
git checkout mybranch
# Generate an Infracost JSON file that represents changes between the two runs (e.g. to store in CI or pass to `infracost comment`)
infracost breakdown --path . \
                    --format json \
                    --compare-to infracost-main.json \
                    --out-file infracost-pull-request-123.json
```

If you have problems with parsing HCL we recommend you use Infracost with a [Terraform plan JSON](/docs/features/cli_commands/#option-2-terraform-plan-json) instead. 

Alternatively, you can force Infracost to fall back to the old behaviour using `--project-type=terraform_cli`.

### Removed flags

The `--terraform-parse-hcl` has been removed with this release. This is flag is no longer required because parsing HCL is now the default behaviour for Infracost.

If you want to force Infracost to parse your Terraform projects this can be done using: `--project-type=terraform_dir`.
