---
slug: v0.8_migration
title: v0.8 migration guide
---

Infracost v0.8.0 included major changes that,
1. Introduce a new `diff` command so you can see the 
2. 

`v0.1` has been changed to `0.1` in usage-file.
config-file requires a `version: 0.1` property.

## Commands

### Root command

The root `infracost` command has been deprecated as we move towards subcommands. There are now two main subcommands for running Infracost

- `infracost breakdown` - This works similarly to the previous `infracost` root command and shows a table breakdown of all resources.
- `infracost diff` - This shows a list of the resources along with costs that will change when the Terraform is applied.

The old root command will be fully removed in v0.9.0.

### Report command

The `infracost report` command has been deprecated and replaced with `infracost output`. This takes Infracost JSON files as inputs and allows them to be combined and outputted in any format.

## Flags

The following flags have all been deprecated and replaced with `--path`:

- `--terraform-dir` / `--tfdir`
- `--terraform-json-file` / `--tfjson`
- `--terraform-plan-file` / `--tfplan`

The `--output`/ `-o` flag has been replaced with `--format`.

## Environment variables

The following environment variables have been deprecated:

- `TERRAFORM_BINARY` - replaced with `INFRACOST_TERRAFORM_BINARY`
- `TERRAFORM_CLOUD_HOST` - replaced with `INFRACOST_TERRAFORM_CLOUD_HOST`
- `TERRAFORM_CLOUD_TOKEN` - replaced with `INFRACOST_TERRAFORM_CLOUD_TOKEN`
- `SKIP_UPDATE_CHECK` - replaced with `INFRACOST_SKIP_UPDATE_CHECK`

## Config file

The format of the config file has been simplified. Initially it will be used for supporting multi-project runs. It can be used like this:

```yaml
version: 0.1
projects:
  - path: path/to/first/terraform
    terraform_workspace: dev

  - path: path/to/second/terraform
    terraform_workspace: prod
```

For a more detailed example see the [config file](/docs/multi_project/config_file) docs.

## JSON output

The JSON output is in the following format:

```json
{
  "version": "0.1",
  "projects": [
    {
      "path": "path/to/code",
      "metadata": {
        "terraformWorkspace": "stage",
      },
      "pastBreakdown": {
        "resources": [...]
        "totalMonthlyCost": "730",
        "totalHourlyCost": "1"
      },
      "breakdown": {
        "resources": [...]
        "totalMonthlyCost": "1460",
        "totalHourlyCost": "1"
      },
      "diff": {
        "resources": [...]
        "totalMonthlyCost": "730",
        "totalHourlyCost": "1"
      }
    }
  ],
  "summary": {
    "unsupportedResourceCounts": {...}
  },
}
```

The following top-level keys are deprecated and will be removed in v0.9.0: `resources`, `totalMonthlyCost`, `totalHourlyCost`.
