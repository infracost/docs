---
slug: advanced_usage
title: Advanced usage
---

The following advanced usage methods can be used in addition to the usage methods mentioned in the [Getting started](/docs/#usage) page. These methods can also be used via an Infracost [config file](/docs/multi_project/config_file).

## Terraform plan file

Infracost can be run against a Terraform plan file. This implies that you have already run Terraform `init`, thus Infracost just runs Terraform `show`, which does not require cloud credentials or `--terraform-plan-flags` to be set.

  ```shell
  cd path/to/code
  terraform init
  terraform plan -out tfplan.binary

  infracost breakdown --path tfplan.binary

  infracost diff --path tfplan.binary
  ```

## Use Terraform state

The `infracost breakdown` command has a `--terraform-use-state` flag that is useful if you want to see the cost breakdown of the current Terraform state. This implies that you have already run Terraform `apply`, thus Infracost just runs Terraform `show`, which does not require cloud credentials or `--terraform-plan-flags` to be set.

  ```shell
  infracost breakdown --path examples/terraform --terraform-use-state
  ```

## Terraform state JSON file

The `infracost breakdown` command can be run against a Terraform state JSON file. This is the [JSON output format] of the state, not the internal JSON representation. It has to be generated by running `terraform show -json` inside a Terraform project. This is useful if you want to see the cost breakdown of the current Terraform state. This implies that you have already run Terraform `apply`, thus no cloud creds or `--terraform-plan-flags` is needed.

  ```shell
  cd path/to/code
  terraform show -json > tfstate.json

  infracost breakdown --path tfstate.json
  ```

## Parsing HCL (experimental)

Infracost can parse the Terraform HCL code directly without having to generate a plan JSON. This is useful if you want to run Infracost without having access to the Terraform binary or any cloud credentials that Terraform requires. It is also faster than generating a plan JSON. Currently this runs in the background alongside the existing approach so we can compare the accuracy. You can also run it manually by using:


  ```shell
  infracost breakdown --path=path/to/code --terraform-parse-hcl \
    --terraform-var-file="myvars.tfvars" \ # Load variables from the given files, similar to Terraform's -var-file flag
    --terraform-var "my_var=value" \       # Set a value for one of the input variables, similar to Terraform's -var flag
    --terraform-var "my_other_var=value"   # You can use the --terraform-var-file and --terraform-var flags multiple times
  ```


My worry with the March plan so far is there's little engineering work:

* We can do some things for security, but it might be worth waiting for Tony to have a look first which isn't going to happen until early March.
* The Policy v2 stuff and the HCL parsing stuff doesn't need much.
* We can always do resource adding and tech debt to fill the gap if we have one.
